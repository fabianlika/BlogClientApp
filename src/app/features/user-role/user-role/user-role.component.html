<div class="container mt-3">
  <h1 class="text-center mb-4">User Roles</h1>

 

  <div *ngIf="successMessage" class="alert alert-success" role="alert">
    {{ successMessage }}
  </div>

  
  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>

  <table class="table table-striped table-bordered mt-3" *ngIf="userRoles.length > 0">
    <thead class="thead-light">
      <tr>
        <th>Name</th>
        <th>Roles</th>
        <th class="text-center">
          
        </th>
      </tr>
    </thead>
    <tbody>
      
      <tr *ngFor="let userRole of userRoles | slice:(currentPage-1)*itemsPerPage:currentPage*itemsPerPage">
        <td>{{ userRole.Name }}</td>
        <td>{{ userRole.Roles }}</td>
        <td>
          <div class="d-flex justify-content-center align-items-center">
            <button (click)="toggleRoleDropdown(userRole.UserId)" class="btn btn-primary me-2">
              <i class="fas fa-pencil-alt"></i>
            </button>
            <div *ngIf="isDropdownVisible(userRole.UserId)" class="d-flex align-items-center">
              <select [(ngModel)]="userRole.selectedRole" class="form-control me-2">
                <option value="admin">Admin</option>
                <option value="user">User</option>
              </select>
              <button (click)="updateRole(userRole)" class="btn btn-success">
                <i class="fas fa-save"></i>
              </button>
            </div>
          </div>
          
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="loading" class="spinner-border ml-2" role="status">
    <span class="sr-only">Loading...</span>
  </div>

  <app-pagination
    [currentPage]="currentPage"
    [totalPages]="totalPages"
    (pageChange)="onPageChange($event)">
  </app-pagination>
</div>
