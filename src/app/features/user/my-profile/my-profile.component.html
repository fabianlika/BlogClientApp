<div class="container">
    <h2>My Profile</h2>
    <form [formGroup]="userForm" (ngSubmit)="updateUser()">
        <div class="form-group">
            <label for="name">Name</label>
            <input id="name" formControlName="Name" required class="form-control" />
            <div *ngIf="userForm.get('Name')?.invalid && userForm.get('Name')?.touched" class="text-danger">
                <small>Name is required.</small>
            </div>
        </div>
        <div class="form-group">
            <label for="username">Username</label>
            <input id="username" formControlName="Username" required class="form-control" />
            <div *ngIf="userForm.get('Username')?.invalid && userForm.get('Username')?.touched" class="text-danger">
                <small>Username is required.</small>
            </div>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input id="email" formControlName="Email" required class="form-control" />
            <div *ngIf="validationErrors.email" class="text-danger">
                <small>{{ validationErrors.email }}</small>
            </div>
        </div>
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input id="phone" formControlName="PhoneNumber" required class="form-control" />
            <div *ngIf="validationErrors.tel" class="text-danger">
                <small>{{ validationErrors.tel }}</small>
            </div>
        </div>
        <div class="form-group">
            <label for="birthday">Birthday</label>
            <input id="birthday" type="date" formControlName="Birthday" required class="form-control" />
            <div *ngIf="userForm.get('Birthday')?.invalid && userForm.get('Birthday')?.touched" class="text-danger">
                <small>Birthday is required.</small>
            </div>
        </div>
  
        <!-- Checkbox for editing password -->
        <div class="form-group">
            <input type="checkbox" (change)="toggleEditPassword()" /> Edit Password
        </div>
  
        <!-- Password fields displayed when editing password -->
        <div *ngIf="isEditingPassword">
          <div class="form-group">
              <label for="password">New Password</label>
              <div class="input-group">
                  <input
                      id="password"
                      [type]="showPassword ? 'text' : 'password'"
                      formControlName="PasswordHash"
                      class="form-control"
                      (input)="checkPasswords()"
                  />
                  <div class="input-group-append">
                      <button
                          type="button"
                          class="btn btn-outline-secondary"
                          (click)="togglePasswordVisibility('new')">
                          <i class="fas" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
                      </button>
                  </div>
              </div>
              <div *ngIf="userForm.get('PasswordHash')?.errors?.['passwordStrength']" class="text-danger">
                  <small>Password must be at least 8 characters long, contain upper and lower case letters, numbers, and special characters.</small>
              </div>
          </div>
          <div class="form-group">
              <label for="confirmPassword">Confirm Password</label>
              <div class="input-group">
                  <input
                      id="confirmPassword"
                      [type]="showConfirmPassword ? 'text' : 'password'"
                      formControlName="ConfirmPassword"
                      class="form-control"
                      (input)="checkPasswords()"
                  />
                  <div class="input-group-append">
                      <button
                          type="button"
                          class="btn btn-outline-secondary"
                          (click)="togglePasswordVisibility('confirm')">
                          <i class="fas" [class.fa-eye]="!showConfirmPassword" [class.fa-eye-slash]="showConfirmPassword"></i>
                      </button>
                  </div>
              </div>
              <div *ngIf="passwordMismatch && confirmPasswordTouched" class="text-danger">
                  <small>Passwords do not match.</small>
              </div>
          </div>
      </div>
        
        <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">Update Profile</button>
    </form>
  </div>
  